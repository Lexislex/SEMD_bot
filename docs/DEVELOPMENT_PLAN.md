# –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏—è –∏ —Ä–∞–∑–≤–∏—Ç–∏—è SEMD Bot

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞

### –ß—Ç–æ —ç—Ç–æ –∑–∞ –ø—Ä–æ–µ–∫—Ç

**SEMD Bot** - Telegram-–±–æ—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤–µ—Ä—Å–∏–π –°–≠–ú–î (–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –î–æ–∫—É–º–µ–Ω—Ç—ã). –ë–æ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ –§–ù–°–ò –ú–∏–Ω–∑–¥—Ä–∞–≤–∞ –†–§ –∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–≤–µ—Ä—Å–∏—è 2.0.0)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (–≤–µ—Ç–∫–∞ `ref_modules`):
- –°—Ç–∞—Ä—ã–π –∫–æ–¥ –≤ `main.py` (~127 —Å—Ç—Ä–æ–∫) - –º–æ–Ω–æ–ª–∏—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤ `core/` –∏ `plugins/` - –Ω–∞—á–∞—Ç–∞, –Ω–æ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Python 3.10+, pyTelegramBotAPI, SQLite, pandas, requests, schedule

**–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü–æ–∏—Å–∫ –≤–µ—Ä—Å–∏–π –°–≠–ú–î –ø–æ ID —Ä–µ–¥–∞–∫—Ü–∏–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ –§–ùSI (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω –≤ prod, 1 –º–∏–Ω –≤ dev)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –†–∞–±–æ—Ç–∞ —Å API –§–ù–°–ò –ú–∏–Ω–∑–¥—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:**
```
SEMD_bot/
‚îú‚îÄ‚îÄ config.py              # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ main.py                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (legacy –º–æ–Ω–æ–ª–∏—Ç)
‚îú‚îÄ‚îÄ core/                  # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
‚îÇ   ‚îú‚îÄ‚îÄ bot.py            # SEMDBotCore –∫–ª–∞—Å—Å
‚îÇ   ‚îú‚îÄ‚îÄ plugin_manager.py # –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–ª–∞–≥–∏–Ω–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ scheduler.py      # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (–ü–£–°–¢–û–ô!)
‚îú‚îÄ‚îÄ plugins/              # –ü–ª–∞–≥–∏–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ base.py          # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –ø–ª–∞–≥–∏–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ semd_checker/    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –°–≠–ú–î (—á–∞—Å—Ç–∏—á–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ nsi_updater/     # –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –§–ù–°–ò (–ü–£–°–¢–û)
‚îÇ   ‚îî‚îÄ‚îÄ statistics/      # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ü–£–°–¢–û)
‚îú‚îÄ‚îÄ handlers/            # Legacy –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ fnsi.py         # –†–∞–±–æ—Ç–∞ —Å –§–ù–°–ò
‚îÇ   ‚îú‚îÄ‚îÄ scrap.py        # –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ sql.py          # –ë–î –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ stat.py         # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îî‚îÄ‚îÄ utils/              # –£—Ç–∏–ª–∏—Ç—ã
    ‚îú‚îÄ‚îÄ database.py
    ‚îú‚îÄ‚îÄ logging_setup.py
    ‚îú‚îÄ‚îÄ text_formatters.py
    ‚îî‚îÄ‚îÄ date_utils.py
```

---

## –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ üî¥

1. **–ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**
   - `core/scheduler.py` —Å–æ–∑–¥–∞–Ω, –Ω–æ –ø—É—Å—Ç–æ–π (1 —Å—Ç—Ä–æ–∫–∞)
   - –ù–æ–≤–∞—è –ø–ª–∞–≥–∏–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   - `main.py` –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –ª–æ–≥–∏–∫—É
   - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: –ª–æ–≥–∏–∫–∞ –°–≠–ú–î –µ—Å—Ç—å –≤ `handlers/fnsi.py` –∏ `plugins/semd_checker/`

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤**
   - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `tests/` –ø—É—Å—Ç–∞—è
   - –§–∞–π–ª `.coverage` –µ—Å—Ç—å, –Ω–æ —Ç–µ—Å—Ç—ã –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –∫–æ–¥
   - –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–π —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

3. **–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   ```python
   # fnsi.py:60-62
   except:
       bot.send_message(message.chat.id, f'ID –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑')
   ```
   - –ü—É—Å—Ç—ã–µ/—à–∏—Ä–æ–∫–∏–µ except –±–ª–æ–∫–∏ –º–∞—Å–∫–∏—Ä—É—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
   - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
   - –ù–µ—Ç retry-–º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
   - `config.py` –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
   - `_read_env()` –º–æ–ª—á–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –û—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ—è–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ runtime

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ üü°

5. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**
   - –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –°–≠–ú–î –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ `handlers/` –∏ `plugins/`
   - –§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –ø–æ —Ä–∞–∑–Ω—ã–º –º–æ–¥—É–ª—è–º
   - –ù–µ—Ç –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –¥–ª—è –æ–±—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

6. **–ü—É—Å—Ç—ã–µ –ø–ª–∞–≥–∏–Ω—ã**
   - `plugins/nsi_updater/` - —Ç–æ–ª—å–∫–æ `__init__.py`
   - `plugins/statistics/` - —Ç–æ–ª—å–∫–æ `__init__.py`
   - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ legacy `handlers/`, –Ω–æ –Ω–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω

7. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Dependency Injection**
   - –ì–ª–æ–±–∞–ª—å–Ω—ã–π `get_config()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - Tight coupling –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

8. **–ù–µ—Ç —Å–∏—Å—Ç–µ–º—ã –º–∏–≥—Ä–∞—Ü–∏–π –ë–î**
   - –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `CREATE TABLE IF NOT EXISTS`
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—É –ë–î
   - –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü

9. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–ª—è –ë–î**
   - –ü—Ä—è–º—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –ø–æ –∫–æ–¥—É
   - –ù–µ—Ç ORM –∏–ª–∏ query builder
   - –°–ª–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –ë–î (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ PostgreSQL)

### Code Quality üü¢

10. **Inconsistent logging**
    - –í `main.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `logger.info/error`
    - –í `handlers/` –µ—Å—Ç—å `logger.warning` –≤–º–µ—Å—Ç–æ `logger.error`
    - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏

11. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ type hints –≤ legacy –∫–æ–¥–µ**
    - –ú–æ–¥—É–ª–∏ –≤ `handlers/` –ø–æ—á—Ç–∏ –±–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π —Ç–∏–ø–æ–≤
    - –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –æ–∂–∏–¥–∞–µ–º—ã–µ —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å mypy –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

12. **–°–ª–∞–±–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
    - `README.md` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ 5 —Å—Ç—Ä–æ–∫
    - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç docstrings –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Ñ—É–Ω–∫—Ü–∏–π legacy –∫–æ–¥–∞
    - –ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è API, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

13. **Hardcoded –∑–Ω–∞—á–µ–Ω–∏—è**
    - –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ (1/15 –º–∏–Ω—É—Ç) –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω—ã –≤ –∫–æ–¥–µ
    - –¢–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
    - –°–ª–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –±–µ–∑ –ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞

14. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã**
    ```python
    # sql.py
    con = sqlite3.connect(...)
    # ... –∫–æ–¥ ...
    con.close()  # –ú–æ–∂–µ—Ç –Ω–µ –≤—ã–∑–≤–∞—Ç—å—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ
    ```

---

## –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏—è –∏ —Ä–∞–∑–≤–∏—Ç–∏—è

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Å—è –ø—Ä–æ–µ–∫—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `docs/`

### –§–∞–∑–∞ 1: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô | **–°—Ä–æ–∫–∏:** 2-3 –Ω–µ–¥–µ–ª–∏

#### 1.1 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å core/scheduler.py
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `TaskScheduler` –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `schedule`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã `add_task()`, `remove_task()`, `start()`, `stop()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å graceful shutdown
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

**–§–∞–π–ª—ã:** `core/scheduler.py`

#### 1.2 –°–æ–∑–¥–∞—Ç—å –∑–∞–≥–ª—É—à–∫—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- [ ] –°–æ–∑–¥–∞—Ç—å `plugins/stub_menu/plugin.py` –Ω–∞—Å–ª–µ–¥—É—é—â–∏–π `BasePlugin`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É `/start` –∏ `/menu` –∫–æ–º–∞–Ω–¥
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ë–æ—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª"
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É `/help` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –±–æ—Ç–µ

**–§–∞–π–ª—ã:** `plugins/stub_menu/plugin.py`

**–í–∞–∂–Ω–æ:** –≠—Ç–∞ –∑–∞–≥–ª—É—à–∫–∞ –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π RootMenuPlugin –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç NSI Updater

#### 1.3 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω NSI Updater (–ü–†–ò–û–†–ò–¢–ï–¢!)
- [ ] –°–æ–∑–¥–∞—Ç—å `plugins/nsi_updater/plugin.py` –Ω–∞—Å–ª–µ–¥—É—é—â–∏–π `ScheduledPlugin`
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∏–∑ `handlers/scrap.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `get_scheduled_tasks()` (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ API –§–ù–°–ò —Å retry –º–µ—Ö–∞–Ω–∏–∑–º–æ–º
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ —á–∞—Ç –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã —Å mock API
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –§–ù–°–ò

**–§–∞–π–ª—ã:** `plugins/nsi_updater/plugin.py`, `plugins/nsi_updater/handlers.py`

**–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏:**
- ‚úÖ NSI Updater –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç API –§–ù–°–ò –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç (–∏–ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª)
- ‚úÖ –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞—Ç—ã
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Graceful shutdown —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### 1.4 –ó–∞–≤–µ—Ä—à–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ –ø–ª–∞–≥–∏–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∏–∑ `main.py` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–ª–∞–≥–∏–Ω—ã
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `SEMDBotCore`
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `PluginManager`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- [ ] –£–¥–∞–ª–∏—Ç—å/–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –∏–∑ `main.py` –≤ `legacy/`

**–§–∞–π–ª—ã:** `main.py`, `core/bot.py`, `core/plugin_manager.py`

---

### –§–∞–∑–∞ 1.5: –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ü–û–°–õ–ï NSI Updater)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í–´–°–û–ö–ò–ô | **–°—Ä–æ–∫–∏:** 1-2 –Ω–µ–¥–µ–ª–∏ (–ø–æ—Å–ª–µ 1.3)

#### 1.5.1 –°–æ–∑–¥–∞—Ç—å Root Menu Plugin (–∑–∞–º–µ–Ω–∞ –∑–∞–≥–ª—É—à–∫–µ)
- [ ] –°–æ–∑–¥–∞—Ç—å `plugins/root_menu/plugin.py` –Ω–∞—Å–ª–µ–¥—É—é—â–∏–π `BasePlugin`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É `/start` –∏ `/menu` –∫–æ–º–∞–Ω–¥
- [ ] –°–æ–∑–¥–∞—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞–≥–∏–Ω–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å routing –≤ –Ω—É–∂–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã —á–µ—Ä–µ–∑ callback'–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–Ω–æ–ø–∫–∏ "‚Üê –ù–∞–∑–∞–¥" –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é
- [ ] –£–¥–∞–ª–∏—Ç—å –∑–∞–≥–ª—É—à–∫—É `plugins/stub_menu/`

**–§–∞–π–ª—ã:** `plugins/root_menu/plugin.py`, `plugins/root_menu/handlers.py`

**–í–∞–∂–Ω–æ:** RootMenuPlugin –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω –ü–ï–†–í–´–ú –≤ PluginManager

#### 1.5.2 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω SEMD Checker
- [ ] –°–æ–∑–¥–∞—Ç—å `plugins/semd_checker/plugin.py`
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∏–∑ `handlers/fnsi.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –≤–µ—Ä—Å–∏–π –°–≠–ú–î –ø–æ ID
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∫–∞–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–µ—Ä—Å–∏—è—Ö
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "‚Üê –ù–∞–∑–∞–¥" –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã

**–§–∞–π–ª—ã:** `plugins/semd_checker/plugin.py`, `plugins/semd_checker/handlers.py`

#### 1.5.3 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω Statistics
- [ ] –°–æ–∑–¥–∞—Ç—å `plugins/statistics/plugin.py`
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∏–∑ `handlers/stat.py` –∏ `handlers/sql.py`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/stat` —á–µ—Ä–µ–∑ –ø–ª–∞–≥–∏–Ω
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (CSV/Excel)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ —á–µ—Ä–µ–∑ matplotlib (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "‚Üê –ù–∞–∑–∞–¥" –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é

**–§–∞–π–ª—ã:** `plugins/statistics/plugin.py`, `plugins/statistics/handlers.py`

#### 1.5.4 –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `plugins.yaml` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è: `enabled`, `priority`, `config`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ `PluginManager`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `reload_plugin()` –¥–ª—è –≥–æ—Ä—è—á–µ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–§–∞–π–ª—ã:** `plugins.yaml`, `core/plugin_manager.py`

---

### –§–∞–∑–∞ 2: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í–´–°–û–ö–ò–ô | **–°—Ä–æ–∫–∏:** 2-3 –Ω–µ–¥–µ–ª–∏

#### 2.1 –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pytest, pytest-cov, pytest-asyncio, pytest-mock
- [ ] –°–æ–∑–¥–∞—Ç—å `tests/conftest.py` —Å —Ñ–∏–∫—Å—Ç—É—Ä–∞–º–∏
- [ ] Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π `core/`, `utils/`, `handlers/`
- [ ] Integration-—Ç–µ—Å—Ç—ã –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤
- [ ] Mock –¥–ª—è API –§–ù–°–ò –∏ Telegram Bot API
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å coverage report (—Ü–µ–ª—å: >80%)
- [ ] –°–æ–∑–¥–∞—Ç—å `tests/README.md` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–µ—Å—Ç–æ–≤

**–§–∞–π–ª—ã:** `tests/`, `pytest.ini`, `conftest.py`

#### 2.2 –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD
- [ ] –°–æ–∑–¥–∞—Ç—å `.github/workflows/tests.yml`
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –Ω–∞ PR
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ coverage (fail if <80%)
- [ ] –õ–∏–Ω—Ç–µ—Ä—ã: black, flake8, mypy, isort
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ staging –ø—Ä–∏ merge –≤ `develop`
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ production –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ release

**–§–∞–π–ª—ã:** `.github/workflows/tests.yml`, `.github/workflows/deploy.yml`

#### 2.3 –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –ø—É—Å—Ç—ã–µ `except:` –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è: `FNSIAPIError`, `DatabaseError`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å retry-–º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è API-–∑–∞–ø—Ä–æ—Å–æ–≤ (tenacity)
- [ ] –î–æ–±–∞–≤–∏—Ç—å circuit breaker –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å graceful shutdown (–æ–±—Ä–∞–±–æ—Ç–∫–∞ SIGTERM/SIGINT)
- [ ] –î–æ–±–∞–≤–∏—Ç—å fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –§–ù–°–ò

**–§–∞–π–ª—ã:** `utils/exceptions.py`, `utils/retry.py`, `handlers/scrap.py`

#### 2.4 –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å structured logging (python-json-logger)
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤ (RotatingFileHandler)
- [ ] –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –¥–ª—è dev/staging/prod
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ request_id –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Sentry –¥–ª—è error tracking (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Dashboard –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤ (ELK/Grafana Loki)

**–§–∞–π–ª—ã:** `utils/logging_setup.py`, `config.py`

#### 2.5 –î–æ–±–∞–≤–∏—Ç—å health checks
- [ ] –°–æ–∑–¥–∞—Ç—å HTTP endpoint `/health` (Flask/FastAPI)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API –§–ù–°–ò
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è Telegram Bot API
- [ ] –ú–µ—Ç—Ä–∏–∫–∏: uptime, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–§–∞–π–ª—ã:** `core/health.py`, `main.py`

---

### –§–∞–∑–∞ 3: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô | **–°—Ä–æ–∫–∏:** 1-2 –º–µ—Å—è—Ü–∞

#### 3.1 –†–∞—Å—à–∏—Ä–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞

**3.1.1 –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/subscribe <nsi_oid>`
- [ ] –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫ –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ `subscriptions`)
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø–æ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞–º
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/unsubscribe` –∏ `/mysubscriptions`
- [ ] –ì—Ä—É–ø–ø–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ (—Ä–æ–ª–∏: admin, user)

**3.1.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/settings` —Å inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
- [ ] –í—ã–±–æ—Ä —á–∞—Å—Ç–æ—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (realtime/hourly/daily)
- [ ] –§–∏–ª—å—Ç—Ä—ã: —Ç–∏–ø —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞, –≤–∞–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] Quiet hours (–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –Ω–æ—á—å)
- [ ] –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ä–º–∞—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**3.1.3 –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/export <format>` (CSV/Excel/JSON)
- [ ] –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞
- [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –≤–µ—Ä—Å–∏–π (diff)
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ Telegram
- [ ] Scheduled exports (–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ/–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã)

**3.1.4 –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/search <query>` (–ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –°–≠–ú–î)
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –¥–æ–∫—É–º–µ–Ω—Ç–∞
- [ ] Fuzzy search –¥–ª—è –æ–ø–µ—á–∞—Ç–æ–∫
- [ ] Pagination –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–§–∞–π–ª—ã:** `plugins/semd_checker/`, `plugins/subscriptions/`, `handlers/export.py`

#### 3.2 Web Dashboard –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (`api/`)
- [ ] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞–º
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏
- [ ] –õ–æ–≥–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

**–§–∞–π–ª—ã:** `api/main.py`, `api/routes/`, `api/templates/`

#### 3.3 –£–ª—É—á—à–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –ë–î

**3.3.1 –ú–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Alembic**
- [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Alembic
- [ ] –°–æ–∑–¥–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ö–µ–º—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –ø–æ–ª–µ–π
- [ ] –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

**3.3.2 ORM –∏–ª–∏ Query Builder**
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å SQLAlchemy Core –∏–ª–∏ SQLModel
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å —Å—ã—Ä—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ ORM
- [ ] –î–æ–±–∞–≤–∏—Ç—å relationships –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏
- [ ] Connection pooling

**3.3.3 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ `user_id`, `date_time`, `nsi_oid`
- [ ] –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `users_activity` –ø–æ –¥–∞—Ç–∞–º
- [ ] –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (retention policy)
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (Redis)

**3.3.4 –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL**
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL –¥–ª—è production
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ SQLite
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ PostgreSQL
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –∏ backup

**–§–∞–π–ª—ã:** `alembic/`, `models/`, `database.py`

---

### –§–∞–∑–∞ 4: DevOps –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô | **–°—Ä–æ–∫–∏:** 2-3 –Ω–µ–¥–µ–ª–∏

#### 4.1 –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

**4.1.1 Dockerfile**
```dockerfile
# Multi-stage build
FROM python:3.10-slim as builder
# ... build dependencies
FROM python:3.10-slim
# ... runtime
```
- [ ] Multi-stage build –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞
- [ ] Non-root user –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [ ] Health check –≤ Dockerfile
- [ ] Build –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏
- [ ] Security scanning (Trivy)

**4.1.2 docker-compose.yml**
```yaml
services:
  bot:
    build: .
    depends_on:
      - postgres
      - redis
  postgres:
    image: postgres:15
  redis:
    image: redis:7
```
- [ ] –°–µ—Ä–≤–∏—Å—ã: bot, postgres, redis, nginx (–¥–ª—è web dashboard)
- [ ] Volumes –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] Networks –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] Environment variables –∏–∑ `.env`
- [ ] Healthchecks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

**–§–∞–π–ª—ã:** `Dockerfile`, `docker-compose.yml`, `.dockerignore`

#### 4.2 –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã (`k8s/`)
- [ ] Helm chart –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
- [ ] Horizontal Pod Autoscaling
- [ ] Persistent Volumes –¥–ª—è –ë–î
- [ ] ConfigMaps –∏ Secrets
- [ ] Ingress –¥–ª—è Web Dashboard

**–§–∞–π–ª—ã:** `k8s/deployment.yaml`, `k8s/service.yaml`, `helm/`

#### 4.3 –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- [ ] GitHub Actions workflow –¥–ª—è Docker build & push
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ staging –ø—Ä–∏ merge –≤ `develop`
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ production –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ release tag
- [ ] Rollback –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–º –¥–µ–ø–ª–æ–µ
- [ ] Blue-green deployment –¥–ª—è zero-downtime
- [ ] Smoke tests –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

**–§–∞–π–ª—ã:** `.github/workflows/deploy.yml`

#### 4.4 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

**4.4.1 Prometheus**
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `prometheus-client`
- [ ] –ú–µ—Ç—Ä–∏–∫–∏: –∑–∞–ø—Ä–æ—Å—ã –∫ API, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞, –æ—à–∏–±–∫–∏
- [ ] Custom metrics: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ –Ω–∞ endpoint `/metrics`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Prometheus scraping

**4.4.2 Grafana Dashboards**
- [ ] Dashboard "Bot Overview": –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∑–∞–ø—Ä–æ—Å—ã, –æ—à–∏–±–∫–∏
- [ ] Dashboard "FNSI API": latency, error rate, availability
- [ ] Dashboard "Database": query time, connection pool, storage
- [ ] Alerts: high error rate, API unavailable, disk full

**4.4.3 Alerting**
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Alertmanager
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram channel –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
- [ ] Email alerts –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- [ ] PagerDuty integration –¥–ª—è on-call (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–§–∞–π–ª—ã:** `monitoring/prometheus.yml`, `monitoring/grafana/dashboards/`

---

### –§–∞–∑–∞ 5: –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô | **–°—Ä–æ–∫–∏:** ongoing

#### 5.1 Code Quality Tools

**5.1.1 Pre-commit hooks**
```yaml
# .pre-commit-config.yaml
repos:
  - repo: https://github.com/psf/black
  - repo: https://github.com/PyCQA/flake8
  - repo: https://github.com/pre-commit/mirrors-mypy
  - repo: https://github.com/PyCQA/isort
```
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pre-commit
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å black (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å flake8 (–ª–∏–Ω—Ç–∏–Ω–≥)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å mypy (type checking)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å isort (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ CI –ø—Ä–æ–≤–µ—Ä–∫—É pre-commit

**5.1.2 Type Hints**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –≤–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å type stubs –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –±–µ–∑ —Ç–∏–ø–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º mypy
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ mypy

**5.1.3 Code Review**
- [ ] –°–æ–∑–¥–∞—Ç—å `CONTRIBUTING.md` —Å guidelines
- [ ] –®–∞–±–ª–æ–Ω—ã –¥–ª—è PR: feature, bugfix, refactoring
- [ ] –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è reviewers
- [ ] –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π review –ø–µ—Ä–µ–¥ merge

**–§–∞–π–ª—ã:** `.pre-commit-config.yaml`, `mypy.ini`, `CONTRIBUTING.md`

#### 5.2 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**5.2.1 README.md**
- [ ] –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –°—Ö–µ–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (–¥–∏–∞–≥—Ä–∞–º–º–∞)
- [ ] –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É
- [ ] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
- [ ] FAQ
- [ ] Badges: build status, coverage, version

**5.2.2 API Documentation**
- [ ] Sphinx –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ docstrings
- [ ] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
- [ ] –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–∞ Read the Docs

**5.2.3 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- [ ] `docs/ARCHITECTURE.md` - –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π
- [ ] –î–∏–∞–≥—Ä–∞–º–º—ã: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- [ ] –û–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- [ ] –ì–∞–π–¥ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –Ω–æ–≤—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤

**5.2.4 –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- [ ] `docs/DEPLOYMENT.md` - –≥–∞–π–¥ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- [ ] `docs/MONITORING.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- [ ] `docs/TROUBLESHOOTING.md` - —Ä–µ—à–µ–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º
- [ ] Runbook –¥–ª—è on-call –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤

**5.2.5 CHANGELOG**
- [ ] –°–æ–∑–¥–∞—Ç—å `CHANGELOG.md` –ø–æ Semantic Versioning
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ conventional commits
- [ ] –†–∞–∑–¥–µ–ª—ã: Added, Changed, Deprecated, Removed, Fixed, Security

**–§–∞–π–ª—ã:** `README.md`, `docs/`, `CHANGELOG.md`, `CONTRIBUTING.md`

#### 5.3 Security

**5.3.1 Dependency Scanning**
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `safety` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- [ ] GitHub Dependabot –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö PR —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
- [ ] –†–µ–≥—É–ª—è—Ä–Ω—ã–π –∞—É–¥–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ–∂–µ–º–µ—Å—è—á–Ω–æ)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—Ü–µ–Ω–∑–∏–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**5.3.2 Code Security**
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `bandit` –¥–ª—è –ø–æ–∏—Å–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ –∫–æ–¥–µ
- [ ] –ó–∞–ø—Ä–µ—Ç hardcoded secrets (detect-secrets)
- [ ] Input validation –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] SQL injection protection (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ORM)
- [ ] XSS protection –¥–ª—è Web Dashboard

**5.3.3 Infrastructure Security**
- [ ] –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î (SQLCipher –∏–ª–∏ pgcrypto)
- [ ] HTTPS-only –¥–ª—è API endpoints
- [ ] Rate limiting –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è abuse
- [ ] API keys rotation policy
- [ ] Secrets management (HashiCorp Vault –∏–ª–∏ AWS Secrets Manager)

**5.3.4 Compliance**
- [ ] GDPR compliance –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ sensitive data
- [ ] Privacy policy –∏ terms of service

**–§–∞–π–ª—ã:** `.github/workflows/security.yml`, `docs/SECURITY.md`

---

## Roadmap —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

### üî¥ Sprint 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è (1.5 –Ω–µ–¥–µ–ª–∏)
**–ó–∞–¥–∞—á–∏ –∏–∑ –§–∞–∑—ã 1.1-1.2:**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `core/scheduler.py` (—Ñ–∞–∑–∞ 1.1)
- [ ] –°–æ–∑–¥–∞—Ç—å –∑–∞–≥–ª—É—à–∫—É `plugins/stub_menu/` –¥–ª—è UI (—Ñ–∞–∑–∞ 1.2)
- [ ] –ë–∞–∑–æ–≤—ã–µ unit-—Ç–µ—Å—Ç—ã –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –Ω–æ UI - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–≥–ª—É—à–∫–∞

---

### üî¥ Sprint 2: Backend –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç!) (2-2.5 –Ω–µ–¥–µ–ª–∏)
**–ó–∞–¥–∞—á–∏ –∏–∑ –§–∞–∑—ã 1.3:**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω NSI Updater (—Ñ–∞–∑–∞ 1.3) - **–ì–õ–ê–í–ù–û–ï**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å TaskScheduler –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã —Å mock API –§–ù–°–ò
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è API
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –§–ù–°–ò
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å graceful shutdown

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** NSI Updater —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏:**
- ‚úÖ NSI Updater –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –§–ù–°–ò API (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —á–∞—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### üü° Sprint 3: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (1.5 –Ω–µ–¥–µ–ª–∏)
**–ó–∞–¥–∞—á–∏ –∏–∑ –§–∞–∑—ã 1.5 (–ü–û–°–õ–ï —É—Å–ø–µ—à–Ω–æ–≥–æ Sprint 2):**
- [ ] –ó–∞–≤–µ—Ä—à–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ –ø–ª–∞–≥–∏–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (—Ñ–∞–∑–∞ 1.4)
- [ ] –°–æ–∑–¥–∞—Ç—å Root Menu Plugin (—Ñ–∞–∑–∞ 1.5.1)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SEMD Checker –ø–ª–∞–≥–∏–Ω (—Ñ–∞–∑–∞ 1.5.2)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Statistics –ø–ª–∞–≥–∏–Ω (—Ñ–∞–∑–∞ 1.5.3)
- [ ] –£–¥–∞–ª–∏—Ç—å –∑–∞–≥–ª—É—à–∫—É stub_menu
- [ ] Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞–≥–∏–Ω–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π UI —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –ø–æ –º–µ–Ω—é

---

### üü° Sprint 4: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2 –Ω–µ–¥–µ–ª–∏)
**–ó–∞–¥–∞—á–∏ –∏–∑ –§–∞–∑—ã 2:**
- [ ] –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (>80%)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD (GitHub Actions)
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è (Docker + docker-compose)
- [ ] –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Health checks

---

### üü¢ Sprint 5: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 –Ω–µ–¥–µ–ª–∏)
**–ó–∞–¥–∞—á–∏ –∏–∑ –§–∞–∑—ã 3:**
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î —á–µ—Ä–µ–∑ Alembic
- [ ] –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ PostgreSQL
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus + Grafana)
- [ ] Web Dashboard (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)

---

### üü¢ Sprint 6: –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ (ongoing)
**–ó–∞–¥–∞—á–∏ –∏–∑ –§–∞–∑—ã 5:**
- [ ] Pre-commit hooks
- [ ] Type hints –≤–µ–∑–¥–µ
- [ ] –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] Security audit
- [ ] Performance optimization

---

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ Test coverage > 80%
- ‚úÖ Mypy –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ CI/CD pipeline —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Docker –æ–±—Ä–∞–∑ < 500MB
- ‚úÖ API response time < 200ms (p95)
- ‚úÖ Zero critical security vulnerabilities

### –ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ Uptime > 99.5%
- ‚úÖ –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è < 5 –º–∏–Ω—É—Ç
- ‚úÖ False positives < 1%
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π +50%
- ‚úÖ User satisfaction score > 4.5/5

---

## –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏–∏

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|---------|-----------|
| API –§–ù–°–ò –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | Retry –º–µ—Ö–∞–Ω–∏–∑–º, circuit breaker, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ API –§–ù–°–ò | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–æ–µ | –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ö–µ–º—ã |
| –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ Telegram Bot API | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ | Rate limiting, batch –æ—Ç–ø—Ä–∞–≤–∫–∞, queue |
| –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ë–î | –ù–∏–∑–∫–∞—è | –ö—Ä–∏—Ç–∏—á–Ω–æ–µ | –†–µ–≥—É–ª—è—Ä–Ω—ã–µ backup, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è, point-in-time recovery |
| –†–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ | Horizontal scaling, load balancing, caching |
| –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, scanning, pinning versions |

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- [pyTelegramBotAPI](https://github.com/eternnoir/pyTelegramBotAPI)
- [FastAPI](https://fastapi.tiangolo.com/)
- [SQLAlchemy](https://www.sqlalchemy.org/)
- [Alembic](https://alembic.sqlalchemy.org/)
- [Pytest](https://docs.pytest.org/)
- [Docker](https://docs.docker.com/)
- [Prometheus](https://prometheus.io/docs/)

### Best Practices
- [12 Factor App](https://12factor.net/)
- [Semantic Versioning](https://semver.org/)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [Python Best Practices](https://realpython.com/tutorials/best-practices/)

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥
- [RED Method](https://grafana.com/blog/2018/08/02/the-red-method-how-to-instrument-your-services/)
- [SRE Book](https://sre.google/books/)

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –≤–æ–ø—Ä–æ—Å—ã

**–ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞:** Alexey Alepko (AlepkoAA@mos.ru)
**–í–µ—Ä—Å–∏—è –ø–ª–∞–Ω–∞:** 1.0.0
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-21
**–°–ª–µ–¥—É—é—â–∏–π review:** 2025-11-21

---

**–°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞–Ω–∞:** [–¢—Ä–µ–∫–∏–Ω–≥ –≤ GitHub Projects](https://github.com/your-repo/projects)
